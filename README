Axemblr Provisionr
==================

Pool management service for 10s or 100s of virtual machines.

Features
--------

* Can provision 10s or 100s of virtual machines across multiple clouds
* Fully persistent granular internal workflows
* Can be restarted at any time with no impact
* Has a modular architecture based on OSGi and Apache Karaf
* Can be used as an interactive tool or as a service 

How does it look like?
----------------------

TODO add Activiti Explorer screenshot or diagram + Karaf shell photo

Who is behind this?
-------------------

Core committers:

* Andrei Savu - asavu@axemblr.com - http://www.linkedin.com/in/sandrei
* Ioan Eugen Stan - ieugen@axemblr.com - http://www.linkedin.com/in/ieugen

License
-------

Apache License Version 2.0
http://apache.org/licenses/LICENSE-2.0.txt

Supported cloud providers
-------------------------

We are working on making all this run as expected on Amazon EC2 & CloudStack. 

How to create a distribution?
-----------------------------

You can build a binary release by running:

$ ./scripts/create_distribution.sh 

And you will find the .tar.gz file in:

karaf/assembly/target/com.axemblr.provisionr-*.tar.gz

How to run?
-----------

$ cd karaf/assembly/target/
$ tar xvfz com.axemblr.provisionr-*.tar.gz
$ cd com.axemblr.provisionr*
$ bin/provisionr

TODO: explain configuration & add commands to create pool 

How to build?
-------------

Maven as usual:

$ mvn clean install 

This will download dependencies, compile the sources and run
unit tests and some of the integration tests (karaf feature install)

How to test?
------------

All the unit tests are executed as part of the normal build

You can run tests against a specific cloud provider for 
individual activities by running:

$ ./scripts/activities_test.sh ID # (amazon or cloudstack)

Or you can the test the pool management process as a whole 
by running:

$ ./scripts/process_test.sh ID # (amazon or cloudstack) 

Your credentials should be in ~/.m2/settings.xml or sent as system properties

<profiles>
    <profile>
        <id>provisionr-credentials</id>
        <activation><activeByDefault>true</activeByDefault></activation>
        <properties>
            <test.cloudstack.provider.accessKey>cs-key</test.cloudstack.provider.accessKey>
            <test.cloudstack.provider.secretKey>cs-secret</test.cloudstack.provider.secretKey>
            <test.cloudstack.provider.endpoint>...</test.cloudstack.provider.endpoint>
            <test.cloudstack.provider.zoneId>1</test.cloudstack.provider.zoneId>
            <test.cloudstack.provider.templateId>3012</test.cloudstack.provider.templateId>
            <test.cloudstack.provider.serviceOffering>105</test.cloudstack.provider.serviceOffering>

            <test.amazon.provider.accessKey>xxxxx</test.amazon.provider.accessKey>
            <test.amazon.provider.secretKey>xxxxx</test.amazon.provider.secretKey>
            <test.amazon.provider.region>us-east-1</test.amazon.provider.region>
        </properties>
    </profile>
</profiles>

Thanks! 

